// This is your Prisma schema file,
// learn more about it in the docs https//pris.ly/d/prisma-schema

// generator client {
//     provider = "prisma-client-js"
// }

// datasource db {
//   provider = "postgresql"
//   url = env("POSTGRES_PRISMA_URL") // uses connection pooling
//   directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
// }

generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  relationMode = "prisma"
}
model User {
  id String        @id @default(uuid())
  username String       @unique
  email    String       @unique
  firstName      String?
  lastName       String?
  password String
  ratings Rating[]  
}

model Chip {
  id String        @id @default(uuid())
  name String
  imgUrl String
  flavor String
  combinations Combination[]
}

model Dip {
  id String        @id @default(uuid())
  name String
  imgUrl String
  flavor String
  combinations Combination[]
}

model Rating {
  id String           @id @default(uuid())
  rating Float
  userId String
  user User        @relation(fields: [userId], references: [id])
  combinationId String
  combination Combination @relation(fields: [combinationId], references: [id])

  @@index([userId])
  @@index([combinationId])
}


model Combination {
  id String          @id @default(uuid())
  comboNr String  @unique
  name String
  chipId String
  chip Chip     @relation(fields: [chipId], references: [id])
  dipId String
  dip Dip   @relation(fields: [dipId], references: [id])
  rating Float   
  ratings Rating[]  

  @@index([chipId])
  @@index([dipId])
}